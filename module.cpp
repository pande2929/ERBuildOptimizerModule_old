#include <pybind11/pybind11.h>
#include <pybind11/stl.h>
#include "pymodels.h"
#include "SubsetSum.h"
#include "ERBuildOptimizer.h"

namespace py = pybind11;

PYBIND11_MODULE(er_build_optimizer_module, m) {
	py::class_<ERBuildOptimizer>(m, "ERBuildOptimizer", py::dynamic_attr())
		.def(py::init<const int, const bool, const py::dict&>())
		.def("SetWeapon", &ERBuildOptimizer::SetWeapon)
		.def_readwrite("mh_weapon", &ERBuildOptimizer::mh_weapon)
		.def_readwrite("oh_weapon", &ERBuildOptimizer::oh_weapon)
		.def_readwrite("optimal_character", &ERBuildOptimizer::optimal_character)
		.def("Optimize", &ERBuildOptimizer::Optimize)
		.def_property_readonly("calculation_result", &ERBuildOptimizer::GetCalculationResult);

	py::class_<tarnished>(m, "TarnishedCPP", py::dynamic_attr())
		.def(py::init<>())
		.def_readwrite("name", &tarnished::name)
		.def_readwrite("base_strength", &tarnished::base_strength)
		.def_readwrite("base_dexterity", &tarnished::base_dexterity)
		.def_readwrite("base_intelligence", &tarnished::base_intelligence)
		.def_readwrite("base_faith", &tarnished::base_faith)
		.def_readwrite("base_arcane", &tarnished::base_arcane)
		.def_readwrite("base_vigor", &tarnished::base_vigor)
		.def_readwrite("base_mind", &tarnished::base_mind)
		.def_readwrite("base_endurance", &tarnished::base_endurance)
		.def_readwrite("vigor", &tarnished::vigor)
		.def_readwrite("mind", &tarnished::mind)
		.def_readwrite("endurance", &tarnished::endurance)
		.def_readwrite("opt_strength", &tarnished::opt_strength)
		.def_readwrite("opt_dexterity", &tarnished::opt_dexterity)
		.def_readwrite("opt_intelligence", &tarnished::opt_intelligence)
		.def_readwrite("opt_faith", &tarnished::opt_faith)
		.def_readwrite("opt_arcane", &tarnished::opt_arcane);

	py::class_<weapon>(m, "WeaponCPP", py::dynamic_attr())
		.def(py::init<>())
		.def_readwrite("id", &weapon::id)
		.def_readwrite("name", &weapon::name)
		.def_readwrite("weapon_type", &weapon::weapon_type)
		.def_readwrite("origin_weapon", &weapon::origin_weapon)
		.def_readwrite("damage_physical", &weapon::damage_physical)
		.def_readwrite("damage_magic", &weapon::damage_magic)
		.def_readwrite("damage_fire", &weapon::damage_fire)
		.def_readwrite("damage_lightning", &weapon::damage_lightning)
		.def_readwrite("damage_holy", &weapon::damage_holy)
		.def_readwrite("required_str", &weapon::required_str)
		.def_readwrite("required_dex", &weapon::required_dex)
		.def_readwrite("required_int", &weapon::required_int)
		.def_readwrite("required_fai", &weapon::required_fai)
		.def_readwrite("required_arc", &weapon::required_arc)
		.def_readwrite("correction_str", &weapon::correction_str)
		.def_readwrite("correction_dex", &weapon::correction_dex)
		.def_readwrite("correction_int", &weapon::correction_int)
		.def_readwrite("correction_fai", &weapon::correction_fai)
		.def_readwrite("correction_arc", &weapon::correction_arc)
		.def_readwrite("attack_element_correct_bitmask_str", &weapon::attack_element_correct_bitmask_str)
		.def_readwrite("attack_element_correct_bitmask", &weapon::attack_element_correct_bitmask)
		.def_readwrite("damage_pct_physical", &weapon::damage_pct_physical)
		.def_readwrite("damage_pct_magic", &weapon::damage_pct_magic)
		.def_readwrite("damage_pct_fire", &weapon::damage_pct_fire)
		.def_readwrite("damage_pct_lightning", &weapon::damage_pct_lightning)
		.def_readwrite("damage_pct_holy", &weapon::damage_pct_holy)
		.def_readwrite("damage_pct_stamina", &weapon::damage_pct_stamina)
		.def_readwrite("damage_pct_poise", &weapon::damage_pct_poise)
		.def_readwrite("correction_pct_str", &weapon::correction_pct_str)
		.def_readwrite("correction_pct_dex", &weapon::correction_pct_dex)
		.def_readwrite("correction_pct_int", &weapon::correction_pct_int)
		.def_readwrite("correction_pct_fai", &weapon::correction_pct_fai)
		.def_readwrite("correction_pct_arc", &weapon::correction_pct_arc)
		.def_readwrite("base_damage_pct_overall", &weapon::base_damage_pct_overall)
		.def_readwrite("physical_calc_correct_id", &weapon::physical_calc_correct_id)
		.def_readwrite("physical_stat_max_0", &weapon::physical_stat_max_0)
		.def_readwrite("physical_stat_max_1", &weapon::physical_stat_max_1)
		.def_readwrite("physical_stat_max_2", &weapon::physical_stat_max_2)
		.def_readwrite("physical_stat_max_3", &weapon::physical_stat_max_3)
		.def_readwrite("physical_stat_max_4", &weapon::physical_stat_max_4)
		.def_readwrite("physical_grow_0", &weapon::physical_grow_0)
		.def_readwrite("physical_grow_1", &weapon::physical_grow_1)
		.def_readwrite("physical_grow_2", &weapon::physical_grow_2)
		.def_readwrite("physical_grow_3", &weapon::physical_grow_3)
		.def_readwrite("physical_grow_4", &weapon::physical_grow_4)
		.def_readwrite("physical_adjustment_pt_grow_0", &weapon::physical_adjustment_pt_grow_0)
		.def_readwrite("physical_adjustment_pt_grow_1", &weapon::physical_adjustment_pt_grow_1)
		.def_readwrite("physical_adjustment_pt_grow_2", &weapon::physical_adjustment_pt_grow_2)
		.def_readwrite("physical_adjustment_pt_grow_3", &weapon::physical_adjustment_pt_grow_3)
		.def_readwrite("physical_adjustment_pt_grow_4", &weapon::physical_adjustment_pt_grow_4)
		.def_readwrite("magic_calc_correct_id", &weapon::magic_calc_correct_id)
		.def_readwrite("magic_stat_max_0", &weapon::magic_stat_max_0)
		.def_readwrite("magic_stat_max_1", &weapon::magic_stat_max_1)
		.def_readwrite("magic_stat_max_2", &weapon::magic_stat_max_2)
		.def_readwrite("magic_stat_max_3", &weapon::magic_stat_max_3)
		.def_readwrite("magic_stat_max_4", &weapon::magic_stat_max_4)
		.def_readwrite("magic_grow_0", &weapon::magic_grow_0)
		.def_readwrite("magic_grow_1", &weapon::magic_grow_1)
		.def_readwrite("magic_grow_2", &weapon::magic_grow_2)
		.def_readwrite("magic_grow_3", &weapon::magic_grow_3)
		.def_readwrite("magic_grow_4", &weapon::magic_grow_4)
		.def_readwrite("magic_adjustment_pt_grow_0", &weapon::magic_adjustment_pt_grow_0)
		.def_readwrite("magic_adjustment_pt_grow_1", &weapon::magic_adjustment_pt_grow_1)
		.def_readwrite("magic_adjustment_pt_grow_2", &weapon::magic_adjustment_pt_grow_2)
		.def_readwrite("magic_adjustment_pt_grow_3", &weapon::magic_adjustment_pt_grow_3)
		.def_readwrite("magic_adjustment_pt_grow_4", &weapon::magic_adjustment_pt_grow_4)
		.def_readwrite("fire_calc_correct_id", &weapon::fire_calc_correct_id)
		.def_readwrite("fire_stat_max_0", &weapon::fire_stat_max_0)
		.def_readwrite("fire_stat_max_1", &weapon::fire_stat_max_1)
		.def_readwrite("fire_stat_max_2", &weapon::fire_stat_max_2)
		.def_readwrite("fire_stat_max_3", &weapon::fire_stat_max_3)
		.def_readwrite("fire_stat_max_4", &weapon::fire_stat_max_4)
		.def_readwrite("fire_grow_0", &weapon::fire_grow_0)
		.def_readwrite("fire_grow_1", &weapon::fire_grow_1)
		.def_readwrite("fire_grow_2", &weapon::fire_grow_2)
		.def_readwrite("fire_grow_3", &weapon::fire_grow_3)
		.def_readwrite("fire_grow_4", &weapon::fire_grow_4)
		.def_readwrite("fire_adjustment_pt_grow_0", &weapon::fire_adjustment_pt_grow_0)
		.def_readwrite("fire_adjustment_pt_grow_1", &weapon::fire_adjustment_pt_grow_1)
		.def_readwrite("fire_adjustment_pt_grow_2", &weapon::fire_adjustment_pt_grow_2)
		.def_readwrite("fire_adjustment_pt_grow_3", &weapon::fire_adjustment_pt_grow_3)
		.def_readwrite("fire_adjustment_pt_grow_4", &weapon::fire_adjustment_pt_grow_4)
		.def_readwrite("lightning_calc_correct_id", &weapon::lightning_calc_correct_id)
		.def_readwrite("lightning_stat_max_0", &weapon::lightning_stat_max_0)
		.def_readwrite("lightning_stat_max_1", &weapon::lightning_stat_max_1)
		.def_readwrite("lightning_stat_max_2", &weapon::lightning_stat_max_2)
		.def_readwrite("lightning_stat_max_3", &weapon::lightning_stat_max_3)
		.def_readwrite("lightning_stat_max_4", &weapon::lightning_stat_max_4)
		.def_readwrite("lightning_grow_0", &weapon::lightning_grow_0)
		.def_readwrite("lightning_grow_1", &weapon::lightning_grow_1)
		.def_readwrite("lightning_grow_2", &weapon::lightning_grow_2)
		.def_readwrite("lightning_grow_3", &weapon::lightning_grow_3)
		.def_readwrite("lightning_grow_4", &weapon::lightning_grow_4)
		.def_readwrite("lightning_adjustment_pt_grow_0", &weapon::lightning_adjustment_pt_grow_0)
		.def_readwrite("lightning_adjustment_pt_grow_1", &weapon::lightning_adjustment_pt_grow_1)
		.def_readwrite("lightning_adjustment_pt_grow_2", &weapon::lightning_adjustment_pt_grow_2)
		.def_readwrite("lightning_adjustment_pt_grow_3", &weapon::lightning_adjustment_pt_grow_3)
		.def_readwrite("lightning_adjustment_pt_grow_4", &weapon::lightning_adjustment_pt_grow_4)
		.def_readwrite("holy_calc_correct_id", &weapon::holy_calc_correct_id)
		.def_readwrite("holy_stat_max_0", &weapon::holy_stat_max_0)
		.def_readwrite("holy_stat_max_1", &weapon::holy_stat_max_1)
		.def_readwrite("holy_stat_max_2", &weapon::holy_stat_max_2)
		.def_readwrite("holy_stat_max_3", &weapon::holy_stat_max_3)
		.def_readwrite("holy_stat_max_4", &weapon::holy_stat_max_4)
		.def_readwrite("holy_grow_0", &weapon::holy_grow_0)
		.def_readwrite("holy_grow_1", &weapon::holy_grow_1)
		.def_readwrite("holy_grow_2", &weapon::holy_grow_2)
		.def_readwrite("holy_grow_3", &weapon::holy_grow_3)
		.def_readwrite("holy_grow_4", &weapon::holy_grow_4)
		.def_readwrite("holy_adjustment_pt_grow_0", &weapon::holy_adjustment_pt_grow_0)
		.def_readwrite("holy_adjustment_pt_grow_1", &weapon::holy_adjustment_pt_grow_1)
		.def_readwrite("holy_adjustment_pt_grow_2", &weapon::holy_adjustment_pt_grow_2)
		.def_readwrite("holy_adjustment_pt_grow_3", &weapon::holy_adjustment_pt_grow_3)
		.def_readwrite("holy_adjustment_pt_grow_4", &weapon::holy_adjustment_pt_grow_4)
		.def_readwrite("poison_calc_correct_id", &weapon::poison_calc_correct_id)
		.def_readwrite("poison_stat_max_0", &weapon::poison_stat_max_0)
		.def_readwrite("poison_stat_max_1", &weapon::poison_stat_max_1)
		.def_readwrite("poison_stat_max_2", &weapon::poison_stat_max_2)
		.def_readwrite("poison_stat_max_3", &weapon::poison_stat_max_3)
		.def_readwrite("poison_stat_max_4", &weapon::poison_stat_max_4)
		.def_readwrite("poison_grow_0", &weapon::poison_grow_0)
		.def_readwrite("poison_grow_1", &weapon::poison_grow_1)
		.def_readwrite("poison_grow_2", &weapon::poison_grow_2)
		.def_readwrite("poison_grow_3", &weapon::poison_grow_3)
		.def_readwrite("poison_grow_4", &weapon::poison_grow_4)
		.def_readwrite("poison_adjustment_pt_grow_0", &weapon::poison_adjustment_pt_grow_0)
		.def_readwrite("poison_adjustment_pt_grow_1", &weapon::poison_adjustment_pt_grow_1)
		.def_readwrite("poison_adjustment_pt_grow_2", &weapon::poison_adjustment_pt_grow_2)
		.def_readwrite("poison_adjustment_pt_grow_3", &weapon::poison_adjustment_pt_grow_3)
		.def_readwrite("poison_adjustment_pt_grow_4", &weapon::poison_adjustment_pt_grow_4)
		.def_readwrite("bleed_calc_correct_id", &weapon::bleed_calc_correct_id)
		.def_readwrite("bleed_stat_max_0", &weapon::bleed_stat_max_0)
		.def_readwrite("bleed_stat_max_1", &weapon::bleed_stat_max_1)
		.def_readwrite("bleed_stat_max_2", &weapon::bleed_stat_max_2)
		.def_readwrite("bleed_stat_max_3", &weapon::bleed_stat_max_3)
		.def_readwrite("bleed_stat_max_4", &weapon::bleed_stat_max_4)
		.def_readwrite("bleed_grow_0", &weapon::bleed_grow_0)
		.def_readwrite("bleed_grow_1", &weapon::bleed_grow_1)
		.def_readwrite("bleed_grow_2", &weapon::bleed_grow_2)
		.def_readwrite("bleed_grow_3", &weapon::bleed_grow_3)
		.def_readwrite("bleed_grow_4", &weapon::bleed_grow_4)
		.def_readwrite("bleed_adjustment_pt_grow_0", &weapon::bleed_adjustment_pt_grow_0)
		.def_readwrite("bleed_adjustment_pt_grow_1", &weapon::bleed_adjustment_pt_grow_1)
		.def_readwrite("bleed_adjustment_pt_grow_2", &weapon::bleed_adjustment_pt_grow_2)
		.def_readwrite("bleed_adjustment_pt_grow_3", &weapon::bleed_adjustment_pt_grow_3)
		.def_readwrite("bleed_adjustment_pt_grow_4", &weapon::bleed_adjustment_pt_grow_4)
		.def_readwrite("pass1_poison", &weapon::pass1_poison)
		.def_readwrite("pass1_scarlet_rot", &weapon::pass1_scarlet_rot)
		.def_readwrite("pass1_bleed", &weapon::pass1_bleed)
		.def_readwrite("pass1_death", &weapon::pass1_death)
		.def_readwrite("pass1_frost", &weapon::pass1_frost)
		.def_readwrite("pass1_sleep", &weapon::pass1_sleep)
		.def_readwrite("pass1_madness", &weapon::pass1_madness)
		.def_readwrite("pass2_poison", &weapon::pass2_poison)
		.def_readwrite("pass2_scarlet_rot", &weapon::pass2_scarlet_rot)
		.def_readwrite("pass2_bleed", &weapon::pass2_bleed)
		.def_readwrite("pass2_death", &weapon::pass2_death)
		.def_readwrite("pass2_frost", &weapon::pass2_frost)
		.def_readwrite("pass2_sleep", &weapon::pass2_sleep)
		.def_readwrite("pass2_madness", &weapon::pass2_madness)
		.def_readwrite("pass3_poison", &weapon::pass3_poison)
		.def_readwrite("pass3_scarlet_rot", &weapon::pass3_scarlet_rot)
		.def_readwrite("pass3_bleed", &weapon::pass3_bleed)
		.def_readwrite("pass3_death", &weapon::pass3_death)
		.def_readwrite("pass3_frost", &weapon::pass3_frost)
		.def_readwrite("pass3_sleep", &weapon::pass3_sleep)
		.def_readwrite("pass3_madness", &weapon::pass3_madness)
		.def_readwrite("max_physical_dmg", &weapon::max_physical_dmg)
		.def_readwrite("max_magic_dmg", &weapon::max_magic_dmg)
		.def_readwrite("max_fire_dmg", &weapon::max_fire_dmg)
		.def_readwrite("max_lightning_dmg", &weapon::max_lightning_dmg)
		.def_readwrite("max_holy_dmg", &weapon::max_holy_dmg)
		.def_readwrite("max_total_dmg", &weapon::max_total_dmg)
		.def_readwrite("max_poison", &weapon::max_poison)
		.def_readwrite("max_bleed", &weapon::max_bleed)
		.def_readwrite("max_frostbite", &weapon::max_frostbite)
		.def_readwrite("max_sleep", &weapon::max_sleep)
		.def_readwrite("max_madness", &weapon::max_madness)
		.def_readwrite("max_scarlet_rot", &weapon::max_scarlet_rot);


#ifdef VERSION_INFO
	m.attr("__version__") = VERSION_INFO;
#else
	m.attr("__version__") = "dev";
#endif
}